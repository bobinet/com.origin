##匿名协作框架

###软件部署
1. 一个部署包，内容包括：
    1. 一些执行文件，包括部署脚本文件。
    2. 一个建模者配置文件com.ini
    3. 一个部署者配置文件范例cod.ini
    4. 一个部署指南文件。
2. 部署者获得部署包的torrent infohash后可以下载，解压缩后阅读部署指南，修改cod.ini然后执行对应的部署脚本，即可完成部署，创建一个cod。每个cod拥有唯一的cod id，并且会创建rsa密钥对。
3. cod包括dht模块，会自动向外提供部署包、com.ini文件两个torrent infohash，常年提供P2P下载。
4. cod通过dht协议（BEP5）查找部署包和com.ini文件的dht node。由于两个infohash不会很接近，因此同时提供的dht node很可能也是cod。于是cod通过自定义的业务逻辑 RESTful API交互。

###codcoin
1. 每一个codcion钱包软件拥有独立的cod id和rsa密钥对，均可发行自己的codcoin。
2. 每一份codcoin包括以下主要数据：
    - codcoin id。全局唯一编号。
    - 铸币记录id。（这枚codcoin的来源）
    - 发行者cod id。
    - 拥有者cod id。（通常是支付给其它cod的。）
    - 金额大小。一个无符号整数。
    - 铸币者数字签名。（对以上数据的数字签名。）
3. 铸币：包括发行和重铸、销毁，每个铸币记录包括以下主要内容：
    1. 销毁旧币：
        1. 旧币数量
        2. 被销毁的旧币。
    2. 铸造新币：
        1. 新币数量
        2. 铸造的新币，铸币者cod用自己的rsa密钥制作铸币者数字签名。
    3. 铸币者数字签名。（对以上数据的数字签名。）
4. 发行操作：发行者cod可以直接发行codcoin，即铸币记录中的销毁旧币数据为空。使用发行者cod的rsa密钥制作铸币者数字签名。
5. 重铸操作：非发行者cod可以重铸codcoin，合格的重铸必须符合以下条件：
	1. 新币、旧币必须是同一种codcoin（同一个发行者）。
	2. 所有旧币在重铸之前是有效的，即此前没有出现在任何铸币记录的销毁旧币部分。
	3. 所有旧币的拥有者是铸币者。
	4. 铸造的新币总额必须等于销毁的旧币总额。
6. 销毁操作：任何拥有者都可以销毁codcion，即铸币记录中的铸造新币数据为空。
7. codcion支付过程即支付者铸币，把接收者cod id写入产生的新币拥有者字段。当铸币记录进入汇总后，支付即完成。
8. 所有铸币记录汇总后，每个codcoin钱包都同步保存。（如何防止分支，有待细化。）

###交易
1. 部署者可以登记自己所拥有的资源种类，包括：
    - 资金：各种传统货币、codcion
    - 时间：部署者可以制定预算周期，发布调度计划，由软件自动登记、自动扣除。
    - 信息资产
2. 交易：
    1. 邀约：一名部署者可以发布交易邀约，主要数据有
        - 邀约id
        - 支付资源种类
        - 收入资源种类
        - 兑换比率
        - 支付资源余量
        - 最小交易数额
        - 数字签名
    2. 接受：另一名部署者可以接受邀约，主要数据有：
        - 交易id
        - 邀约id
        - 交易数量（以邀约者支付资源计算）
        - 数字签名
    3. 成交：软件可以完成的交易（比如两种codcion兑换）立即成交，其它交易会两份产生支付记录，主要数据有：
        - 交易id
        - 资源种类
        - 交易数额
        - 支付者
        - 接收者
        - 接收者数字签名
3. 所有邀约、接受、支付记录全部汇总，每个cod同步保存。
4. 失约：
    1. 出现合法的邀约、接受记录，而双方的支付记录都没有数字签名，邀约者失约。
    2. 出现合法的邀约、接受记录，只有一方支付记录有接收者数字签名，未完成支付一方记失约。
5. 一个codcion发行者，应该保持接受自己发行的codcoin的交易邀约（比如用个人时间兑换codcion），并坚持兑现交易以保持codcion的价值。